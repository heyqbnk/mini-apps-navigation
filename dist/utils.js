"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatLocation=exports.fulfillLocation=exports.createSegue=exports.isTechLocation=exports.parseSegue=void 0;var querystring_1=__importDefault(require("querystring"));function parseSegue(e){var t=e.match(/^#?(.+:\/\/|)(.*)/);if(!t)return null;var o=t[1],r=t[2],n=o.length>0?o.slice(0,o.length-3).split(",").filter(function(e){return e.length>0}).map(decodeURIComponent):[],i="",a="",s=r.indexOf("?");s>-1?(i=r.slice(0,s),a=r.slice(s+1)):i=r;var l=i.split("/").map(decodeURIComponent).map(function(e){return 0===e.length?null:e}),u=l[0],c=void 0===u?null:u,p=l[1],f=void 0===p?null:p,m=l[2],g=void 0===m?null:m;return null===c?n.length>0?{modifiers:n}:null:{view:c,modal:f,popup:g,params:querystring_1.default.parse(a),modifiers:n}}function isTechLocation(e){return null!==e&&!("view"in e)}function createSegue(e){var t=e.modifiers,o=t&&t.length>0?t.map(encodeURIComponent).join(",")+"://":"";if(isTechLocation(e))return o;var r=e.modal,n=e.view,i=e.params,a=e.popup;return o+((n?encodeURIComponent(n):"")+"/"+(r?encodeURIComponent(r):"")+"/"+(a?encodeURIComponent(a):""))+(i&&Object.keys(i).length>0?"?"+querystring_1.default.stringify(i):"")}function fulfillLocation(e){var t=e.modifiers,o=e.params,r=__rest(e,["modifiers","params"]);return __assign(__assign({},r),{modifiers:t||[],params:o||{}})}function formatLocation(e){return null===e?e:isTechLocation(e)?e:fulfillLocation(e)}exports.parseSegue=parseSegue,exports.isTechLocation=isTechLocation,exports.createSegue=createSegue,exports.fulfillLocation=fulfillLocation,exports.formatLocation=formatLocation;